<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vampir K√∂yl√º - Pro Lobi</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        :root { --arka-plan: #0f172a; --kart: #1e293b; --metin: #f8fafc; --vurgu: #ef4444; --altin: #fbbf24; --admin-renk: #3b82f6; --yesil: #22c55e; }
        body { margin: 0; background: var(--arka-plan); color: var(--metin); font-family: 'Segoe UI', sans-serif; display: flex; align-items: center; justify-content: center; min-height: 100vh; padding: 10px; overflow: hidden; }
        .kart { background: var(--kart); border-radius: 30px; padding: 20px; width: 100%; max-width: 480px; text-align: center; border: 1px solid #334155; box-shadow: 0 25px 60px rgba(0,0,0,0.6); max-height: 95vh; overflow-y: auto; scrollbar-width: none; }
        .ekran { display: none; }
        .ekran.aktif { display: block; animation: fadeIn 0.3s; }

        /* INPUT VE AYARLAR */
        input, select { width: 100%; padding: 12px; border-radius: 12px; background: #0f172a; color: white; border: 2px solid #334155; text-align: center; margin-bottom: 10px; font-size: 14px; }
        .ayar-satir { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; font-size: 13px; background: rgba(0,0,0,0.2); padding: 8px; border-radius: 10px; }
        .ayar-satir input { width: 60px; margin: 0; padding: 5px; }

        /* KARAKTER */
        #container3d { width: 100%; height: 140px; background: #000; border-radius: 20px; margin-bottom: 10px; display: flex; align-items: center; justify-content: center; }
        .character { width: 60px; height: 80px; background: var(--vurgu); border-radius: 30px 30px 15px 15px; position: relative; animation: bounce 2s infinite ease-in-out; }
        .eye { position: absolute; width: 8px; height: 10px; background: #000; border-radius: 50%; top: 25px; }
        .eye-l { left: 15px; } .eye-r { right: 15px; }

        /* BUTONLAR */
        .ana-buton { width: 100%; padding: 15px; border-radius: 15px; border: none; font-weight: 800; background: var(--vurgu); color: white; cursor: pointer; margin-top: 10px; }
        .btn-renk { height: 30px; border-radius: 8px; cursor: pointer; border: 1px solid rgba(255,255,255,0.1); }
        .renk-grid { display: grid; grid-template-columns: repeat(6, 1fr); gap: 5px; }

        /* OYUN SONU VE ROL EKRANLARI */
        .rol-ekran { padding: 40px 20px; border-radius: 20px; }
        .vampir-bg { background: linear-gradient(to bottom, #450a0a, #000); color: #ef4444; border: 2px solid #ef4444; }
        .koylu-bg { background: linear-gradient(to bottom, #064e3b, #000); color: #22c55e; border: 2px solid #22c55e; }
        .oldun-bg { background: #000; color: #64748b; border: 2px solid #334155; }
        .fig√ºr { font-size: 80px; margin-bottom: 20px; display: block; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    </style>
</head>
<body>

<div class="kart">
    <div id="ekran-tasarim" class="ekran aktif">
        <h2 style="color:var(--altin); margin-top:0;">OYUNCU PROFƒ∞Lƒ∞</h2>
        <input type="text" id="oyuncuIsmi" placeholder="ƒ∞sminizi girin..." maxlength="12">
        <div id="container3d">
            <div class="character" id="mainChar"><div class="eye eye-l"></div><div class="eye eye-r"></div></div>
        </div>
        <div class="renk-grid" id="palet"></div>
        <button class="ana-buton" onclick="kaydet()">DEVAM ET</button>
    </div>

    <div id="ekran-secim" class="ekran">
        <h2 id="merhaba">Merhaba!</h2>
        <button class="ana-buton" style="background:var(--admin-renk)" onclick="odaAc(true)">üëë ODA KUR (ADMƒ∞N)</button>
        <button class="ana-buton" style="background:#334155; margin-top:10px;" onclick="ekranDegis('ekran-katil')">üö™ ODAYA KATIL</button>
    </div>

    <div id="ekran-admin" class="ekran">
        <h3 style="color:var(--admin-renk);">ADMƒ∞N AYARLARI</h3>
        <div class="ayar-satir"><span>√ñld√ºrme S√ºresi (sn)</span><input type="number" id="s-oldur" value="30"></div>
        <div class="ayar-satir"><span>Sohbet S√ºresi (sn)</span><input type="number" id="s-sohbet" value="60"></div>
        <div class="ayar-satir"><span>Oylama S√ºresi (sn)</span><input type="number" id="s-oyla" value="20"></div>
        
        <div class="ayar-satir">
            <span>Rol√ºn:</span>
            <select id="admin-rol" style="width:100px; margin:0;">
                <option value="oyuncu">Oyuncu</option>
                <option value="izleyici">ƒ∞zleyici</option>
            </select>
        </div>

        <div style="background:#0f172a; padding:10px; border-radius:15px; margin:10px 0;">
            <small>ODA KODU</small><br>
            <b id="odaKodu" style="color:var(--altin); font-size:20px;">VK-1234</b>
        </div>
        <div id="qrcode"></div>
        <button class="ana-buton" style="background:var(--yesil)" onclick="oyunuBaslat()">OYUNU BA≈ûLAT</button>
    </div>

    <div id="ekran-rol" class="ekran">
        <div id="rol-box" class="rol-ekran">
            <span class="fig√ºr" id="rol-emoji">üßõ</span>
            <h1 id="rol-ad">VAMPƒ∞R</h1>
            <p id="rol-bilgi">Gizli kal ve herkesi yok et!</p>
            <button class="ana-buton" style="background:rgba(255,255,255,0.2)" onclick="ekranDegis('ekran-durum')">ANLADIM</button>
        </div>
    </div>

    <div id="ekran-durum" class="ekran">
        <div id="durum-box" class="rol-ekran oldun-bg">
            <span class="fig√ºr">üíÄ</span>
            <h1>√ñLD√úN!</h1>
            <p>Artƒ±k diƒüerlerini sadece izleyebilirsin.</p>
            <button class="ana-buton" onclick="bitir('koylu')">K√ñYL√úLER KAZANDI (TEST)</button>
            <button class="ana-buton" onclick="bitir('vampir')">VAMPƒ∞R KAZANDI (TEST)</button>
        </div>
    </div>

    <div id="ekran-son" class="ekran">
        <h1 id="kazanan-metin" style="font-size:40px;">-</h1>
        <p id="vampir-kim" style="color:var(--altin); font-weight:bold;"></p>
        <button class="ana-buton" onclick="location.reload()">BA≈ûA D√ñN</button>
    </div>

    <div id="ekran-katil" class="ekran">
        <h2>ODAYA KATIL</h2>
        <input type="text" placeholder="VK-XXXX">
        <button class="ana-buton" onclick="alert('Odaya baƒülanƒ±ldƒ±!')">Gƒ∞Rƒ∞≈û YAP</button>
    </div>
</div>

<script>
    let oyuncu = { isim: "", renk: "#ef4444", rol: "k√∂yl√º" };
    const renkler = ['#ef4444', '#f97316', '#fbbf24', '#22c55e', '#3b82f6', '#ffffff'];

    // Renk Paleti
    const palet = document.getElementById('palet');
    renkler.forEach(r => {
        const d = document.createElement('div');
        d.className = 'btn-renk'; d.style.background = r;
        d.onclick = () => { document.getElementById('mainChar').style.background = r; oyuncu.renk = r; };
        palet.appendChild(d);
    });

    function ekranDegis(id) {
        document.querySelectorAll('.ekran').forEach(e => e.classList.remove('aktif'));
        document.getElementById(id).classList.add('aktif');
    }

    function kaydet() {
        oyuncu.isim = document.getElementById('oyuncuIsmi').value || "Oyuncu";
        document.getElementById('merhaba').innerText = "Merhaba, " + oyuncu.isim;
        ekranDegis('ekran-secim');
    }

    function odaAc(isAdmin) {
        const kod = "VK-" + Math.floor(1000 + Math.random() * 9000);
        document.getElementById('odaKodu').innerText = kod;
        document.getElementById('qrcode').innerHTML = "";
        new QRCode(document.getElementById("qrcode"), { text: window.location.href + "?oda=" + kod, width: 100, height: 100 });
        ekranDegis('ekran-admin');
    }

    function oyunuBaslat() {
        const isAdminIzleyici = document.getElementById('admin-rol').value === 'izleyici';
        // Test ama√ßlƒ± rastgele rol verelim
        const roller = ["vampir", "k√∂yl√º"];
        oyuncu.rol = roller[Math.floor(Math.random() * roller.length)];

        if(isAdminIzleyici) {
            alert("Sen izleyicisin! Oyun ba≈ülƒ±yor.");
            ekranDegis('ekran-durum'); // ƒ∞zleyici direk durum ekranƒ±na
            return;
        }

        const box = document.getElementById('rol-box');
        if(oyuncu.rol === "vampir") {
            box.className = "rol-ekran vampir-bg";
            document.getElementById('rol-emoji').innerText = "üßõ";
            document.getElementById('rol-ad').innerText = "VAMPƒ∞RSƒ∞N";
            document.getElementById('rol-bilgi').innerText = "K√∂yl√ºleri gizlice avla!";
        } else {
            box.className = "rol-ekran koylu-bg";
            document.getElementById('rol-emoji').innerText = "üë®‚Äçüåæ";
            document.getElementById('rol-ad').innerText = "K√ñYL√úS√úN";
            document.getElementById('rol-bilgi').innerText = "Aralarƒ±ndaki vampiri bul ve hayatta kal!";
        }
        ekranDegis('ekran-rol');
    }

    function bitir(kazanan) {
        ekranDegis('ekran-son');
        const txt = document.getElementById('kazanan-metin');
        const kim = document.getElementById('vampir-kim');
        kim.innerText = "Vampir: " + oyuncu.isim; // Test i√ßin

        if(kazanan === "vampir") {
            txt.innerText = "VAMPƒ∞R KAZANDI!";
            txt.style.color = "var(--vurgu)";
        } else {
            txt.innerText = "K√ñYL√úLER KAZANDI!";
            txt.style.color = "var(--yesil)";
        }
    }
</script>
</body>
</html>
